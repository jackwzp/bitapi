<!DOCTYPE html>
<html>
<head>
	<title></title>
</head>
<body>

	<table id='blocks'>
		<tr>
			<th>Block</th>
			<th>Hash</th>
			<th>Timestamp</th>
		</tr>
	</table>

	<script type="text/javascript" src="./dist/scripts/bundle.js"></script>
	
	<script type="text/javascript">

		bitcoin.cmd('latestblock').then(function(latest){
			var num = latest.height;
			for(var i = 0; i < 2; i++) {
				bitcoin.cmd('getblock', [num-i]).then(function(block) {
					printBlocks(block);
				})
			}
		});

		function printBlocks(block) {
			var table = document.getElementById('blocks');
			var row = table.insertRow(-1);
			var cell1 = row.insertCell(0);
			var cell2 = row.insertCell(1);
			var cell3 = row.insertCell(2);

			cell1.innerHTML = block.height;
			cell2.innerHTML = block.hash;
			cell3.innerHTML = block.block_time;
		}

		// bitcoin.useRpcApi();
		// bitcoin.cmd('getblockcount').then(function(count) {
		// 	console.log(count);
		// }).catch(function(err) {
		// 	console.log("JACK: " + err)
		// });
	</script>
	
</body>
</html>